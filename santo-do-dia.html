<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Santo do Dia - Rosarium</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <button class="btn-back" onclick="goBack()">← Voltar</button>
      <div class="header-title">
        <div class="header-logo">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m6.364 1.636l-.707-.707M21 12h-1m1.364 6.364l-.707.707M12 21v1m-6.364-1.636l.707.707M3 12h1M4.636 4.636l.707.707" />
          </svg>
        </div>
        <span>Santo do Dia</span>
      </div>
    </div>
  </header>

  <!-- Conteúdo Principal -->
  <div class="page-container">
    <div class="page-content container-md">
      
      <!-- Seção: Santo do Dia -->
      <section class="santo-section">
        <!-- Esfera Central com Imagem -->
        <div class="santo-sphere">
          <div class="santo-image-container">
            <svg id="santo-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" class="santo-icon">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m6.364 1.636l-.707-.707M21 12h-1m1.364 6.364l-.707.707M12 21v1m-6.364-1.636l.707.707M3 12h1M4.636 4.636l.707.707" />
            </svg>
          </div>
        </div>

        <!-- Nome e Título do Santo -->
        <div class="santo-header">
          <h1 id="santo-nome" class="santo-nome">Santo do Dia</h1>
          <p id="santo-titulo" class="santo-titulo">Padroeiro</p>
          <p id="santo-data" class="santo-data">Carregando data...</p>
        </div>

        <!-- Botão Favorito -->
        <div class="santo-actions">
          <button id="btn-favorito" class="btn-favorito" onclick="toggleFavorito()">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
            <span id="favorito-text">Adicionar aos Favoritos</span>
          </button>
        </div>
      </section>

      <!-- Seção: Oração de Intercessão -->
      <section class="card santo-oracao-section">
        <h2 class="card-title">Oração de Intercessão</h2>
        <p id="santo-oracao" class="santo-oracao-text">Carregando oração...</p>
      </section>

      <!-- Seção: Biografia -->
      <section class="card santo-biografia-section">
        <h2 class="card-title">Biografia</h2>
        <p id="santo-biografia" class="santo-biografia-text">Carregando biografia...</p>
      </section>

      <!-- Seção: Santos do Mês -->
      <section class="card santo-mes-section">
        <h2 class="card-title">Santos do Mês</h2>
        
        <!-- Seletor de Mês -->
        <div class="mes-selector">
          <button id="btn-mes-anterior" class="btn-mes" onclick="mesAnterior()">← Anterior</button>
          <span id="mes-atual" class="mes-atual">Dezembro</span>
          <button id="btn-mes-proximo" class="btn-mes" onclick="mesProximo()">Próximo →</button>
        </div>

        <!-- Lista de Santos -->
        <div class="santos-list" id="santos-list">
          <!-- Gerado por JavaScript -->
        </div>
      </section>

    </div>
  </div>

  <script src="santos-database.js"></script>
  <script src="app.js"></script>
  <script src="santos_365.js"></script>
  <script>
    // Variáveis globais
    let mesSelecionado = new Date().getMonth() + 1;
    const mesesNomes = [
      'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
      'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
    ];

    // Inicializar página
    function init() {
      carregarSantoDoDia();
      carregarSantosDoMes();
      atualizarBotaoFavorito();
    }

    // Carregar Santo do Dia
    function carregarSantoDoDia() {
      const hoje = new Date();
      const dia = hoje.getDate();
      const mes = hoje.getMonth() + 1;
      const chave = mes * 100 + dia;
      const santo = SANTOS_DATABASE_365[chave] || Santos.getSantoDoDia();
      
      if (!santo) {
        console.error('Santo do dia não encontrado');
        document.getElementById('santo-nome').textContent = 'Santo não encontrado';
        return;
      }

      const hoje = new Date();
      const dataFormatada = hoje.toLocaleDateString('pt-BR', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });

      document.getElementById('santo-nome').textContent = santo.nome || 'Santo do Dia';
      document.getElementById('santo-titulo').textContent = santo.titulo || 'Padroeiro';
      document.getElementById('santo-data').textContent = dataFormatada;
      document.getElementById('santo-oracao').textContent = santo.oração || 'Oração não disponível';
      document.getElementById('santo-biografia').textContent = santo.biografia || 'Biografia não disponível';
    }

    // Carregar Santos do Mes
    function carregarSantosDoMes() {
      const santos = [];
      for (let dia = 1; dia <= 31; dia++) {
        const chave = mesSelecionado * 100 + dia;
        if (SANTOS_DATABASE_365[chave]) {
          santos.push({ dia: dia, ...SANTOS_DATABASE_365[chave] });
        }
      }
      const list = document.getElementById('santos-list');
      
      // Atualizar nome do mês
      document.getElementById('mes-atual').textContent = mesesNomes[mesSelecionado - 1];

      list.innerHTML = '';

      if (santos.length === 0) {
        list.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">Nenhum santo cadastrado para este mês.</p>';
        return;
      }

      santos.forEach(santo => {
        const hoje = new Date();
        const isToday = santo.dia === hoje.getDate() && mesSelecionado === (hoje.getMonth() + 1);
        
        const item = document.createElement('div');
        item.className = 'santo-item' + (isToday ? ' santo-item-hoje' : '');
        item.onclick = () => selecionarSanto(santo.dia, mesSelecionado);
        
        item.innerHTML = `
          <div class="santo-item-header">
            <div class="santo-item-dia">${String(santo.dia).padStart(2, '0')}</div>
            <div class="santo-item-info">
              <div class="santo-item-nome">${santo.nome}</div>
              <div class="santo-item-titulo">${santo.titulo}</div>
            </div>
          </div>
          ${isToday ? '<div class="badge-hoje">Hoje</div>' : ''}
        `;
        
        list.appendChild(item);
      });
    }

    // Selecionar Santo
    function selecionarSanto(dia, mes) {
      const chave = mes * 100 + dia;
      const santo = SANTOS_DATABASE_365[chave] || Santos.getSantoByData(dia, mes);
      
      if (!santo) {
        alert('Santo não encontrado');
        return;
      }

      // Atualizar exibição
      document.getElementById('santo-nome').textContent = santo.nome || 'Santo';
      document.getElementById('santo-titulo').textContent = santo.titulo || 'Padroeiro';
      document.getElementById('santo-oracao').textContent = santo.oração || 'Oração não disponível';
      document.getElementById('santo-biografia').textContent = santo.biografia || 'Biografia não disponível';
      
      // Atualizar data
      const data = new Date(new Date().getFullYear(), mes - 1, dia);
      const dataFormatada = data.toLocaleDateString('pt-BR', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
      document.getElementById('santo-data').textContent = dataFormatada;

      // Atualizar botão favorito
      atualizarBotaoFavorito(dia, mes);

      // Scroll para o topo
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Mês Anterior
    function mesAnterior() {
      mesSelecionado--;
      if (mesSelecionado < 1) mesSelecionado = 12;
      carregarSantosDoMes();
    }

    // Mês Próximo
    function mesProximo() {
      mesSelecionado++;
      if (mesSelecionado > 12) mesSelecionado = 1;
      carregarSantosDoMes();
    }

    // Toggle Favorito
    function toggleFavorito() {
      const hoje = new Date();
      const dia = hoje.getDate();
      const mes = hoje.getMonth() + 1;

      if (Santos.isFavorito(dia, mes)) {
        Santos.removeFavorito(dia, mes);
      } else {
        Santos.saveFavorito(dia, mes);
      }

      atualizarBotaoFavorito(dia, mes);
    }

    // Atualizar Botão Favorito
    function atualizarBotaoFavorito(dia = null, mes = null) {
      if (!dia || !mes) {
        const hoje = new Date();
        dia = hoje.getDate();
        mes = hoje.getMonth() + 1;
      }

      const btn = document.getElementById('btn-favorito');
      const isFav = Santos.isFavorito(dia, mes);

      if (isFav) {
        btn.classList.add('favorito-ativo');
        document.getElementById('favorito-text').textContent = 'Remover dos Favoritos';
      } else {
        btn.classList.remove('favorito-ativo');
        document.getElementById('favorito-text').textContent = 'Adicionar aos Favoritos';
      }
    }

    // Voltar
    function goBack() {
      window.history.back();
    }

    // Inicializar quando DOM estiver pronto
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
