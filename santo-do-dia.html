<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Santo do Dia - Rosarium</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <button class="btn-back" onclick="goBack()">← Voltar</button>
      <div class="header-title">
        <div class="header-logo">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
              d="M12 3v1m6.364 1.636l-.707-.707M21 12h-1m1.364 6.364l-.707.707M12 21v1m-6.364-1.636l.707.707M3 12h1M4.636 4.636l.707.707"/>
          </svg>
        </div>
        <span>Santo do Dia</span>
      </div>
    </div>
  </header>

  <div class="page-container">
    <div class="page-content container-md">

      <h1 class="page-title">Santo do Dia</h1>

      <!-- Card principal -->
      <div id="santo-container"></div>

      <!-- Lista do mês -->
      <div class="card">
        <h3 class="card-title">Santos deste Mês</h3>
        <div id="santos-list" class="items-list"></div>
      </div>

    </div>
  </div>

  <script src="js/santo-do-dia.js"></script>

  <script>
    async function init() {
      const container = document.getElementById("santo-container");
      const santos = await SantoDoDia.getSantoDoDia();

      // garante array
      const lista = Array.isArray(santos) ? santos : [santos];

      const hoje = new Date().toLocaleDateString("pt-BR", {
        weekday: "long", year: "numeric", month: "long", day: "numeric"
      });

      container.innerHTML = "";

      lista.forEach(santo => {
        container.innerHTML += `
          <div class="card" style="margin-bottom: 2rem; text-align:center;">
            <img src="img/santos/${santo.imagem}" 
                 alt="${santo.nome}" 
                 style="width:150px;height:150px;border-radius:50%;object-fit:cover;margin-bottom:1rem;">
            
            <h2 class="card-title">${santo.nome}</h2>
            <p class="card-description">${hoje}</p>

            <p style="margin-top:1rem;text-align:justify;">${santo.descricao}</p>

            <h3 style="margin:1.2rem 0 0.4rem;">Oração</h3>
            <p style="font-style:italic;">${santo.oracao}</p>
          </div>
        `;
      });

      loadSantosDoMes();
    }

    async function loadSantosDoMes() {
      const list = document.getElementById("santos-list");
      const dados = await SantoDoDia.getSantosDoMes();
      const hoje = new Date().getDate();

      list.innerHTML = "";

      dados.forEach(santo => {
        const isToday = santo.dia === hoje;

        list.innerHTML += `
          <div class="item" style="display:flex;justify-content:space-between;align-items:center;">
            <div>
              <div class="item-title" style="${isToday ? "color:var(--primary);font-weight:700" : ""}">
                ${santo.dia} — ${santo.nome}
              </div>
              <div class="item-description">${santo.oracao}</div>
            </div>

            ${isToday ? `<div style="background:var(--primary);color:white;padding:6px 10px;border-radius:6px;">Hoje</div>` : ""}
          </div>
        `;
      });
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>

</body>
</html>
